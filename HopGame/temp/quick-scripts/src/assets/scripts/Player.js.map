{"version":3,"sources":["assets\\scripts\\Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Player extends cc.Component {\r\n\r\n    @property\r\n    jumpDuration:number=0;\r\n\r\n    @property\r\n    jumpHeight:number=0;\r\n\r\n    @property\r\n    maxMoveSpeed:number=0;   \r\n        \r\n    @property\r\n    accel:number=0;\r\n    accLeft: boolean;\r\n    accRight: boolean;\r\n    xSpeed: number;\r\n\r\n    @property(cc.AudioClip)\r\n    playerJump:cc.AudioClip=null;\r\n    jumpbtn: boolean;\r\n    yHeight: number;\r\n\r\n    //character Jump method script\r\n    // jumpAction() {\r\n    //     var jumpup = cc.tween(this.node).by(this.jumpDuration, { y: this.jumpHeight }, { easing:'sineOut'})\r\n    //     var jumpDown = cc.tween(this.node).by(this.jumpDuration, { y: -this.jumpHeight }, { easing:'sineIn'})\r\n       \r\n    //     //var jumpsound = cc.callFunc(this.playJumpSound,this);\r\n    //     var tween = cc.tween().sequence(jumpup,jumpDown);\r\n    //     console.log('dadadada')//\r\n\r\n    //     // return cc.tween(this.node).repeatForever(tween);\r\n    //     return tween;\r\n    //  }\r\n    playJumpSound(){\r\n        cc.audioEngine.playEffect(this.playerJump,false);\r\n    }\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n// Key strock events\r\n    onKeyDonw(event){\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                // console.log(\"aa persesd\");\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                 // console.log(\"dd persesd\");\r\n                break;\r\n            case cc.macro.KEY.w:\r\n                this.jump();\r\n                break;\r\n        }\r\n                        \r\n        }\r\n    onKeyUp(event){\r\n        switch(event.keyCode){\r\n            case cc.macro.KEY.a:\r\n                this.accLeft=false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight=false;\r\n                break;\r\n        }       \r\n        }\r\n    // jumpAction1(event){\r\n    //     switch(event.keycode){\r\n    //         case cc.macro.KEY.w:\r\n    //         this.jumpAction()\r\n    //         break;\r\n    //     }\r\n    // }\r\n    \r\n    \r\n    onLoad() {\r\n        // var jumpAction = this.jumpAction();\r\n        //  cc.tween(this.node).then(jumpAction)\r\n        //  .start()\r\n       \r\n         this.accLeft=false;\r\n        this.accRight=false;\r\n        this.xSpeed=0\r\n        // this.jumpbtn=false;\r\n\r\n        // this.yHeight=0\r\n\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDonw,this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this);\r\n        // cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.jumpAction1,this);\r\n        // cc.systemEvent.\r\n    }\r\n\r\n    onDestroy(){\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDonw, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n        // cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.jumpAction1,this);\r\n    }\r\n     \r\n    start () {\r\n \r\n    }\r\n\r\n    update(dt){\r\n\r\n        if(this.accLeft){\r\n            // console.log(\"left\");\r\n            this.xSpeed -= this.accel * dt;       \r\n       }else if(this.accRight){\r\n           this.xSpeed += this.accel * dt;     \r\n       }else{\r\n        this.xSpeed = 0;\r\n\r\n       }\r\n    //    if (this.accRight){\r\n    //     console.log(\"right\");\r\n    //    }\r\n       \r\n    //    if(this.jumpbtn){\r\n    //     this.yHeight += this.jumpHeight * dt ;\r\n    //    }\r\n       if(Math.abs(this.xSpeed) > this.maxMoveSpeed){\r\n\r\n        this.xSpeed = this.maxMoveSpeed * this.xSpeed/Math.abs(this.xSpeed);\r\n       }\r\n    //    this.node.x =cc.misc.clampf(this.node.x,-1340,1340)\r\n       this.node.x +=this.xSpeed * dt;\r\n    //    this.node.y +=this.yHeight * dt;\r\n    }\r\n\r\n    jump(){\r\n        this.node.y= cc.misc.clampf(this.node.y,this.jumpHeight,-20)\r\n        cc.tween(this.node).by(0.5,{y:this.jumpHeight})\r\n        .delay(0.2)\r\n        .by(0.5,{y:-this.jumpHeight})\r\n        .start()\r\n    }\r\n\r\n}\r\n"]}